import numpy as np
import statsmodels.api as sm
from matplotlib import pyplot as plt

import pandas as pd
import csv
df = pd.read_csv('DataSet.csv')
with open('DataSet.csv', 'r') as file:
    reader = csv.reader(file)
    next(reader) # Skip the header row
    data = [row for row in reader]


# Extract the relevant data from the loaded data

total_area = [float(row[1]) for row in data]
lowest_point = [row[6] for row in data]
max_elevation = [float(row[5]) for row in data]
lowest_point_num,uniques=pd.factorize(lowest_point)


#define a sinle regression function for total area vs max elevation
X = total_area
Y = max_elevation

#remove outliers from the data update both x and y simultaneously
X = [x for x, y in zip(X, Y) if x < 1000]
Y = [y for x, y in zip(X, Y) if x < 1000]

# fit linear regression model
X = sm.add_constant(X) # add intercept term to X
model = sm.OLS(Y, X).fit()

# print model summary
print(model.summary())

# plot data and regression line
plt.scatter(X[:,1], Y)
x1 = [min(X[:,1]), max(X[:,1])]
y1= [model.params[0] + model.params[1] * x for x in x1]
print(y1)
plt.plot(x1, y1, color='red')
plt.xlabel("X")
plt.ylabel("Y")
plt.title("Linear Regression")
plt.show()
